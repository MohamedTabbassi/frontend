<div class="tunisia-rent-car">
  <!-- Header with logo and language options -->
  <div class="header">
    <div class="logo">
      <h1>AUTO SERVICE CAR<sup>®</sup></h1>
      <p>Agence de location voiture en Tunisie</p>
    </div>
    <div class="header-right">
      
      
    </div>
  </div>

  <!-- Navigation Menu -->
  <div class="nav-menu">
    <div class="nav-links">
      <a href="#" (click)="activeTab = 'home'; $event.preventDefault()" [class.active]="activeTab === 'home'">ACCUEIL</a>
      <a href="#" (click)="activeTab = 'prices'; $event.preventDefault()" [class.active]="activeTab === 'prices'">TARIFS</a>
      <a href="#" (click)="activeTab = 'cars'; $event.preventDefault()" [class.active]="activeTab === 'cars'">VOITURES</a>
      <a href="#" (click)="activeTab = 'agencies'; $event.preventDefault()" [class.active]="activeTab === 'agencies'">AGENCES</a>
      <a href="#" (click)="activeTab = 'promotions'; $event.preventDefault()" [class.active]="activeTab === 'promotions'">PROMOTIONS</a>
      <a href="#" (click)="activeTab = 'strengths'; $event.preventDefault()" [class.active]="activeTab === 'strengths'">POINTS FORTS</a>
      <a href="#" (click)="activeTab = 'transfer'; $event.preventDefault()" [class.active]="activeTab === 'transfer'">TRANSFERT</a>
    </div>
    
  </div>

  <!-- Breadcrumb navigation -->
  <div class="breadcrumb">
    <a href="#">Accueil</a> / 
    <span *ngIf="activeTab === 'prices'">Tarifs</span>
    <span *ngIf="activeTab === 'cars'">Voitures</span>
    <span *ngIf="activeTab === 'agencies'">Agences</span>
    <span *ngIf="activeTab === 'strengths'">Points Forts</span>
    <span *ngIf="activeTab === 'transfer'">Transfert</span>
  </div>

  <!-- Search Form - Always visible -->
  <div class="search-form">
    <div class="form-row">
      <div class="form-group">
        <label>Agence de prise en charge</label>
        <select [(ngModel)]="searchParams.location" class="form-control">
          <option value="">Sélectionnez un lieu</option>
          <option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</option>
        </select>
      </div>
      <div class="form-group">
        <label>Date de retrait</label>
        <div class="date-input">
          <input type="date" [(ngModel)]="searchParams.startDate" class="form-control">
        </div>
      </div>
      <div class="form-group small">
        <label>Heure</label>
        <select [(ngModel)]="searchParams.startTime" class="form-control">
          <option value="10:00">10:00</option>
          <option value="11:00">11:00</option>
          <option value="12:00">12:00</option>
          <option value="13:00">13:00</option>
          <option value="14:00">14:00</option>
          <option value="15:00">15:00</option>
          <option value="16:00">16:00</option>
          <option value="17:00">17:00</option>
          <option value="18:00">18:00</option>
        </select>
      </div>
      <div class="form-group">
        <label>Date de retour</label>
        <div class="date-input">
          <input type="date" [(ngModel)]="searchParams.endDate" class="form-control">
        </div>
      </div>
      <div class="form-group small">
        <label>Heure</label>
        <select [(ngModel)]="searchParams.endTime" class="form-control">
          <option value="10:00">10:00</option>
          <option value="11:00">11:00</option>
          <option value="12:00">12:00</option>
          <option value="13:00">13:00</option>
          <option value="14:00">14:00</option>
          <option value="15:00">15:00</option>
          <option value="16:00">16:00</option>
          <option value="17:00">17:00</option>
          <option value="18:00">18:00</option>
        </select>
      </div>
      <div class="form-group search-btn">
        <button class="btn-search" (click)="searchVehicles()">RECHERCHER</button>
      </div>
    </div>
    <div class="different-return">
      <input type="checkbox" id="differentReturn" [(ngModel)]="differentReturnLocation">
      <label for="differentReturn">Agence de restitution différente</label>
    </div>
  </div>

  <!-- ================ PRICES TAB ================ -->
  <div *ngIf="activeTab === 'prices'" class="prices-tab">
    <h2 class="section-title">Tarifs / Prix location voiture en Tunisie</h2>
    
    <div class="section-content">
      <p>
        Tunisia Rent Car est un acteur incontournable de la location de voitures en Tunisie via le site de réservation <strong>www.tunisia-rent-car.com</strong>. 
        Loueur de véhicules de proximité, Tunisia Rent Car possède un large choix de véhicules, répartis dans un réseau de plusieurs agences de <strong>location</strong> et points relais.
        Notre agence de <strong>location</strong> de voiture <strong>en Tunisie</strong> et à travers son réseaux peut vous assurer le meilleur service dans le domaine de 
        <strong>location de voitures longue</strong> et courtes durée, avec ou sans chauffeur.
      </p>
    </div>

    <h3 class="section-subtitle">Prix / tarifs pas chers location voitures en Tunisie</h3>

    <div class="price-table">
      <table>
        <thead>
          <tr>
            <th>Classe</th>
            <th>Voitures</th>
            <th>3 Jours<br>prix jour</th>
            <th>1 Semaine<br>prix jour</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let car of priceTable">
            <td>{{ car.class }}</td>
            <td>{{ car.model }}</td>
            <td>{{ car.price3Days }} €</td>
            <td>{{ car.price1Week }} €</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="price-notice">
      <p>* Les prix sont donnés à titre indicatif et peuvent varier selon la saison et la disponibilité.</p>
      <p>* Tous nos tarifs comprennent : kilométrage illimité, assurance au tiers et taxes locales.</p>
      <p>* Options supplémentaires disponibles : GPS, siège bébé, assurance tous risques, etc.</p>
    </div>
  </div>

  <!-- ================ CARS TAB ================ -->
  <div *ngIf="activeTab === 'cars'" class="cars-tab">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Chargement des véhicules...</p>
    </div>
    
    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <!-- Filter Options -->
    <div *ngIf="!loading && !error && filteredVehicles.length > 0" class="filter-options">
      <div class="filter-item">
        <label>Transmission</label>
        <select [(ngModel)]="filterTransmission" (change)="applyFilters()" class="form-control">
          <option value="">Tous</option>
          <option value="manuelle">Manuelle</option>
          <option value="automatique">Automatique</option>
        </select>
      </div>
      <div class="filter-item">
        <label>Nombre de siège</label>
        <select [(ngModel)]="filterSeats" (change)="applyFilters()" class="form-control">
          <option value="">Tous</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="7">7</option>
        </select>
      </div>
      <div class="filter-item">
        <label>Catégorie</label>
        <select [(ngModel)]="filterCategory" (change)="applyFilters()" class="form-control">
          <option value="">Tous</option>
          <option value="economy">Économique</option>
          <option value="compact">Compacte</option>
          <option value="sedan">Berline</option>
          <option value="suv">SUV</option>
          <option value="luxury">Luxe</option>
        </select>
      </div>
      <div class="filter-item">
        <label>Carburant</label>
        <select [(ngModel)]="filterFuel" (change)="applyFilters()" class="form-control">
          <option value="">Tous</option>
            (change)="applyFilters()" class="form-control">
          <option value="">Tous</option>
          <option value="essence">Essence</option>
          <option value="diesel">Diesel</option>
        </select>
      </div>
    </div>

    <!-- Vehicles Grid -->
    <div class="vehicles-grid" *ngIf="!loading && !error && filteredVehicles.length > 0">
      <div class="vehicle-card" *ngFor="let vehicle of filteredVehicles">
        <div class="vehicle-badge" *ngIf="vehicle.isNew">
          <span class="new-badge">NEW</span>
        </div>
        <div class="vehicle-image">
          <img [src]="vehicle.imageUrl" [alt]="vehicle.name">
        </div>
        <div class="vehicle-name">{{ vehicle.name }}</div>
        <div class="vehicle-features">
          <div class="feature">
            <i class="fa fa-user"></i> {{ vehicle.seats }}
          </div>
          <div class="feature">
            <i class="fa fa-suitcase"></i> {{ vehicle.luggage || '2' }}
          </div>
          <div class="feature">
            <i class="fa fa-snowflake-o"></i> {{ vehicle.hasAC ? 'OUI' : 'NON' }}
          </div>
          <div class="feature">
            <i class="fa fa-cog"></i> {{ vehicle.transmission }}
          </div>
        </div>
        <div class="vehicle-price">
          <div class="price-includes">
            <p>Prix comprend</p>
            <ul>
              <li>Kilométrage illimité</li>
              <li>Assurance au tiers</li>
              <li>Surcharge Aéroport/Gare</li>
              <li>Caution : 600 €</li>
            </ul>
          </div>
          <div class="price-total">
            <div class="total-days">Total pour {{ calculateDays() }} jours</div>
            <div class="total-amount">{{ calculateTotalPrice(vehicle) }} €</div>
            <div class="price-per-day">{{ vehicle.pricePerDay }} € <span>/jour</span></div>
          </div>
        </div>
        <button class="btn-reserve" (click)="selectVehicle(vehicle)">DEVIS ET RÉSERVATION</button>
      </div>
    </div>

    <!-- No Vehicles Message -->
    <div *ngIf="!loading && !error && filteredVehicles.length === 0" class="no-vehicles">
      <p>Aucun véhicule disponible pour les critères sélectionnés.</p>
    </div>
  </div>

  <!-- ================ AGENCIES TAB ================ -->
  <div *ngIf="activeTab === 'agencies'" class="agencies-tab">
    <h2 class="section-title">Agence location voiture tunisie</h2>
    
    <div class="section-content">
      <p>
        Tunisia Rent Car est une agence de location de voitures en Tunisie qui propose à ses clients la location de voitures pas chères à tunis et dans toutes les villes touristiques de la tunisie tels que hammamet, tozeur, tabarka, nabeul, sousse, djerba, enfidha, zaghouan, monastir, hergia, bizerte ainsi que les aéroport tunis carthage, aéroport enfidha, aéroport djerba, aéroport sfax, aéroport djerba, Tunisia Rent Car est une société dont l'activité principale consiste en la location de voitures de tourisme et utilitaires en Tunisie notre objectif principal est la satisfaction du client.
      </p>
    </div>

    <div *ngFor="let agency of agencies" class="agency-section">
      <h3 class="agency-title">{{ agency.name }}</h3>
      <p class="agency-description">{{ agency.description }}</p>
      
      <div class="agency-contact">
        <p><strong>Téléphone :</strong> {{ agency.phone }}</p>
        <p><strong>E-mail :</strong> {{ agency.email }}</p>
      </div>
    </div>

    <!-- Search Form embedded in agencies tab -->
    <div class="agency-search-form">
      <h3>Réserver une voiture</h3>
      <div class="form-container">
        <div class="form-row agency-form">
          <div class="form-group">
            <label>Agence de prise en charge</label>
            <select class="form-control">
              <option value="">Aéroport Tunis Carthage</option>
              <option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Date de retrait</label>
            <input type="date" class="form-control">
          </div>
          <div class="form-group small">
            <label>Heure</label>
            <select class="form-control">
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
            </select>
          </div>
          <div class="form-group">
            <label>Date de retour</label>
            <input type="date" class="form-control">
          </div>
          <div class="form-group small">
            <label>Heure</label>
            <select class="form-control">
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
            </select>
          </div>
          <div class="form-group search-btn">
            <button class="btn-search">RECHERCHER</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================ STRENGTH POINTS TAB ================ -->
  <div *ngIf="activeTab === 'strengths'" class="strengths-tab">
    <h2 class="section-title">Points Forts de Tunisia Rent Car</h2>
    
    <div class="section-content">
      <p>
        Chez Tunisia Rent Car, nous mettons tout en œuvre pour vous garantir un service de qualité et une expérience de location sans tracas. Découvrez nos principaux points forts qui font de nous le choix privilégié pour la location de voiture en Tunisie.
      </p>
    </div>

    <div class="strengths-grid">
      <div *ngFor="let point of strengthPoints" class="strength-card">
        <h3>{{ point.title }}</h3>
        <p>{{ point.description }}</p>
      </div>
    </div>

    <div class="strength-highlight">
      <h3>Pourquoi choisir Tunisia Rent Car ?</h3>
      <ul>
        <li><strong>Expérience :</strong> Plus de 15 ans d'expertise dans la location de voitures en Tunisie</li>
        <li><strong>Transparence :</strong> Pas de frais cachés, tout est clairement indiqué dès la réservation</li>
        <li><strong>Flexibilité :</strong> Modifications et annulations possibles selon conditions</li>
        <li><strong>Assistance :</strong> Service client disponible 24h/24 et 7j/7</li>
        <li><strong>Rapport qualité-prix :</strong> Tarifs compétitifs et offres promotionnelles régulières</li>
      </ul>
    </div>
  </div>

  <!-- ================ TRANSFER TAB ================ -->
  <div *ngIf="activeTab === 'transfer'" class="transfer-tab">
    <h2 class="section-title">Service de Transfert Aéroport</h2>
    
    <div class="section-content">
      <p>
        En plus de la location de voitures, Tunisia Rent Car propose un service de transfert aéroport de qualité. Que vous arriviez à l'aéroport de Tunis Carthage, Monastir, Enfidha ou Djerba, nous pouvons organiser votre transfert vers votre hôtel ou toute autre destination en Tunisie.
      </p>
    </div>

    <div class="transfer-options">
      <div class="transfer-card">
        <h3>Transfert Standard</h3>
        <p>Véhicule confortable avec chauffeur professionnel pour un transfert sans stress de l'aéroport à votre hôtel.</p>
        <p class="price">À partir de 25 €</p>
      </div>
      <div class="transfer-card">
        <h3>Transfert Premium</h3>
        <p>Véhicule haut de gamme avec chauffeur professionnel parlant français et anglais, eau minérale offerte.</p>
        <p class="price">À partir de 45 €</p>
      </div>
      <div class="transfer-card">
        <h3>Transfert Groupe</h3>
        <p>Minibus climatisé pour groupes jusqu'à 8 personnes, idéal pour les familles ou groupes d'amis.</p>
        <p class="price">À partir de 60 €</p>
      </div>
    </div>

    <div class="transfer-form">
      <h3>Réserver un transfert</h3>
      <div class="form-container">
        <div class="form-row">
          <div class="form-group">
            <label>Lieu de prise en charge</label>
            <select class="form-control">
              <option value="">Sélectionnez un lieu</option>
              <option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Destination</label>
            <input type="text" placeholder="Hôtel, adresse..." class="form-control">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Date</label>
            <input type="date" class="form-control">
          </div>
          <div class="form-group small">
            <label>Heure</label>
            <select class="form-control">
              <option value="10:00">10:00</option>
              <option value="11:00">11:00</option>
              <option value="12:00">12:00</option>
            </select>
          </div>
          <div class="form-group small">
            <label>Passagers</label>
            <select class="form-control">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5+</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group search-btn">
            <button class="btn-search">DEMANDER UN DEVIS</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Booking Modal -->
  <div class="booking-modal" *ngIf="selectedVehicle" (click)="closeModal($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Réservation - {{ selectedVehicle.name }}</h2>
        <button class="btn-close" (click)="selectedVehicle = null">&times;</button>
      </div>
      <div class="modal-body">
        <div class="booking-details">
          <div class="vehicle-image">
            <img [src]="selectedVehicle.imageUrl" [alt]="selectedVehicle.name">
          </div>
          <div class="booking-info">
            <div class="dates-info">
              <div class="date-group">
                <h3>Prise en charge</h3>
                <p>{{ searchParams.startDate | date:'dd/MM/yyyy' }} à {{ searchParams.startTime }}</p>
                <p>{{ getLocationName(searchParams.location) }}</p>
              </div>
              <div class="date-group">
                <h3>Restitution</h3>
                <p>{{ searchParams.endDate | date:'dd/MM/yyyy' }} à {{ searchParams.endTime }}</p>
                <p>{{ differentReturnLocation ? getLocationName(searchParams.returnLocation) : getLocationName(searchParams.location) }}</p>
              </div>
            </div>
            <div class="price-details">
              <h3>Détails du prix</h3>
              <div class="price-row">
                <span>Location du véhicule ({{ calculateDays() }} jours)</span>
                <span>{{ calculateTotalPrice(selectedVehicle) }} €</span>
              </div>
              <div class="price-row total">
                <span>Total</span>
                <span>{{ calculateTotalPrice(selectedVehicle) }} €</span>
              </div>
            </div>
          </div>
        </div>
        <div class="booking-options">
          <h3>Options supplémentaires</h3>
          <div class="option-row">
            <div class="option-item">
              <input type="checkbox" id="insurance" [(ngModel)]="bookingOptions.insurance">
              <label for="insurance">Assurance tous risques (+10€/jour)</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="gps" [(ngModel)]="bookingOptions.gps">
              <label for="gps">GPS (+5€/jour)</label>
            </div>
          </div>
          <div class="option-row">
            <div class="option-item">
              <input type="checkbox" id="childSeat" [(ngModel)]="bookingOptions.childSeat">
              <label for="childSeat">Siège enfant (+7€/jour)</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="additionalDriver" [(ngModel)]="bookingOptions.additionalDriver">
              <label for="additionalDriver">Conducteur supplémentaire (+8€/jour)</label>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="final-price">
          <span>Prix total:</span>
          <span class="price">{{ calculateFinalPrice() }} €</span>
        </div>
        <button class="btn-confirm" (click)="bookVehicle()">CONFIRMER LA RÉSERVATION</button>
      </div>
    </div>
  </div>
</div>
